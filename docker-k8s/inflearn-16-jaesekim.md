# 클러스터 보안

## [Security Context](https://kubernetes.io/docs/tasks/configure-pod-container/security-context/)

서버 침해사고에 대한 최소화하기 위해 컨테이너 내부의 유저 권한을 축소

- 침해사고를 당한 서비스가 모든 권한(root나 노드 커널 기능)으로 동작하는 경우 서비스를 탈취한 공격자는 그대로 컨테이너의 권한을 사용할 수 있기 때문에 권한을 최대한 축소하여 침해사고에 대한 확대를 방지 (최소 권한 정책에 따른 취약점 감소)

보안 컨텍스트 설정(주로 권한)은 주로 리눅스 기능을 통해 설정

- 권한 상승 가능 여부
- 프로세스 기본 UID/GID를 활용한 파일 등의 오브젝트의 액세스 제어
- Linux Capabilities를 활용한 커널 기능 추가
    - 도커는 노드에 있는 커널 기능을 공유해서 사용하기 때문에 리눅스의 커널 기능을 제한하는데 일부 허용하게 함
- 오브젝트에 보안 레이블을 지정하는 SELinux (Security Enhanced Linux) 기능
    - 복잡해서 잘 안쓴다고 함
- AppArmor : 프로그램 프로필을 사용하여 개별 프로그램의 기능 제한
- Seccomp : 프로세스의 시스템 호출을 필터링
