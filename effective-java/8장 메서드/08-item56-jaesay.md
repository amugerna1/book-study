# 공개된 API 요소에는 항상 문서화 주석을 작성하라

문서화 주석이 없다면 자바독도 그저 공개 API 요소들의 선언만 나열해주는게 전부다. API를 올바로 문서화하려면 공개된 모든 클래스, 인터페이스, 메서드, 필드 선언에 문서화 주석을 달아야 한다.

## 표준 규약

- 메서드용 문서화 주석에는 해당 메서드와 클라이언트 사이의 규약을 명료하게 기술해야 한다.
  - how가 아닌 what을 기술
      - 상속용 클래스의 메서드일 경우는 예외
  - 전제조건(precondition)을 모두 나열
      - @throws 태그로 비검사예외와 전제조건 하나를 연결
      - @param 태그를 이용해 그 조건에 영향받는 매개변수에 기술
  - 사후조건(postcondition) 모두 나열
  - 사후조건으로 명확히 나타나지는 않지만 시스템 상태에 어떤한 변화를 가져오는 변화(부작용) 기술
      - e.g. 백그라운드 쓰레드

- 메서드의 계약(contract)을 완벽히 기술하려면 아래사항을 지켜야 한다.
  - 모든 매개변수에 @param 태그
  - 반환타입이 void가 아니라면 @return 태그
  - 발생할 가능성이 있는 모든 예외에 @throws
  - 코딩 표준에서 허락한다면 @return 태그의 설명이 메서드 설명과 같을 때 @return 태그 생략
  - 관례상 @param 태그와 @return 태그의 설명은 해당 매개변수가 뜻하는 값이나 반환값을 설명하는 명사구를 쓴다. @throws 태그의 설명은 if로 시작해 해당 예외를 던지는 조건을 설명하는 절이 뒤따른다. (영어일 경우) @param, @return, @throws 태그의 설명에는 마침표를 붙이지 않는다.
  - 인스턴스 메서드의 문서화 주석에 쓰이는 this는 호출된 메서드가 자리하는 객체를 가리킨다.
  ```java
  /**
   * Returns the element at the specified position in this list.
   *
   * @param index index of the element to return
   * @return the element at the specified position in this list
   * @throws IndexOutOfBoundsException if the index is out of range
   *         ({@code index < 0 || index >= size()})
   */
  E get(int index);
  ```
- 자바독 유틸리티는 문서화 주석을 HTML로 변환하므로 문서화 주석 안의 HTML 요소들이 최종적으로 문서에 반영된다. HTML 메타문자를 주의해서 사용해야 한다.
- {@code} 태그
    - 코드용 폰트로 랜더링
    - HTML 요소나 다른 자바독 태그를 무시
- @ImplSpec
    - 클래스를 상속용으로 설계할 때 자기사용패턴 문서화(self-use pattern) 시 사용
    - 해당 메서드와 하위 클래스 사이의 계약을 설명하여, 하위 클래스들이 그 메서드를 상속하거나 super 키워드를 이용해 호출 할 때 그 메서드가 어떻게 동작하는지를 명확히 인지하고 사용하도록 해줘야 한다.
- {@literal}
    - HTML 마크업이나 자바독 태그를 무시하게 해준다.
    - {@code} 태그와 비슷하지만 코드 폰트로 랜더링하지는 않는다.
- 각 문서화 주석의 첫번째 문장은 해당 요소의 요약 설명(summary description)으로 간주된다.
    - 요약 설명은 반드시 대상의 기능을 고유하게 기술해야 한다. 헷갈리지 않으려면 한 클래스(혹은 인터페이스) 안에서 요약 설명이 똑같은 맴버(혹은 생성자)가 둘 이상이면 안 된다.
    - 요약 설명이 끝나는 판단 기준 주의
        - e.g. 마침표(.)
    - java10부터는 {@summary} 태그 사용
    - 메서드와 생성자의 요약설명은 해당 메서드와 생성자의 동작을 설명하는 (주어가 없는) 동사구여야 한다.
- {@index}
    - 자바9부터는 자바독이 생성한 HTML 문서에 검색(색인) 기능이 추가되었다.
- 제네릭 타입이나 제네릭 메서드를 문서화할 때는 모든 타입 매개변수에 주석을 달아야 한다.
- 열거타입을 문서화할 때는 상수들에도 주석을 달아야 한다.
- 애너테이션 타입을 문서화할 때는 맴버들에도 모두 주석을 달아야 한다.
- 패키지를 설명하는 문서화 주석은 package-info.java 파일에 작성한다. 이 파일은 패키지 선언을 반드시 포함해야 하며 패키지 선언 관련 애너테이션을 추가로 포함할 수도 있다. 자바 9부터 지원하는 모듈 시스템도 이와 비슷하다. 모듈 시스템을 사용한다면 모듈 관련 설명은 module-info.java 파일에 작성하면 된다.
- 클래스 혹은 정적 메서드가 쓰레드 안전하든 그렇지 않든, 쓰레드 안전 수준을 반드시 API 설명에 포함해야 한다.
- 자바독은 메서드 주석을 상속시킬 수 있다. 문서화 주석이 없는 API 요소를 발견하면 자바독이 가장 가까운 문서화 주석을 찾아준다.
- {@inheritDoc} 태그를 사용해 상위 타입의 문서화 주석 일부를 상속할 수 있다. (사용하기 까다로움)
- 여러 클래스가 상호작용하는 복잡한 API라면 문서화 주석 외에도 전체 아키텍처를 설명하는 별도의 설명이 필요할 때가 있다. 이런 설명문서가 있다면 관련 클래스나 패키지의 문서화 주석에서 그 문서의 링크를 제공해주면 좋다.
- 자바독은 프로그래머가 자바독 문서를 올바르게 작성했는지 확인하는 기능을 제공한다.

## 자바독 생성하는 법

- [https://log-laboratory.tistory.com/306](https://log-laboratory.tistory.com/306)

## 핵심 정리

- 문서화 주석은 API를 문서화하는 가장 훌륭하고 효과적인 방법이다.
- 공개 API라면 빠짐없이 설명을 달아야 한다.
- 표준 규약을 일관되게 지키자.
- 정말 잘 쓰인 문서인지를 확인하는 유일한 방법은 자바독 유틸리티가 생성한 웹페이지를 읽어보는 길 뿐이다.